<!DOCTYPE html><html lang="en"><head><meta charSet="utf-8"/><meta name="viewport" content="width=device-width, initial-scale=1"/><link rel="stylesheet" href="/_next/static/css/c0c73e25285197d0.css" data-precedence="next"/><link rel="preload" as="script" fetchPriority="low" href="/_next/static/chunks/webpack-d9a4a9652bc05b48.js"/><script src="/_next/static/chunks/fd9d1056-aa94ea5c2eabf904.js" async=""></script><script src="/_next/static/chunks/117-cf4f55719eda9510.js" async=""></script><script src="/_next/static/chunks/main-app-1211b1bcca45d44d.js" async=""></script><title>Trust your dependencies, but Verify!</title><meta name="description" content="JVM lover‚òïÔ∏è‚ù§Ô∏è
Space Enthusiast üöÄ
Amateur chef üë®üèΩ‚Äçüç≥"/><link rel="apple-touch-icon" href="/apple-touch-icon.png" sizes="180x180"/><link rel="icon" href="/favicon-16x16.png" type="image/png" sizes="16x16"/><link rel="icon" href="/favicon-32x32.png" type="image/png" sizes="32x32"/><script src="/_next/static/chunks/polyfills-42372ed130431b0a.js" noModule=""></script></head><body class="roboto-regular antialiased"><article class="mx-auto max-w-xl py-8"><div class="mb-8 text-center"><time dateTime="2024-04-20T00:00:00.000Z" class="mb-1 text-xs text-gray-600">April 20, 2024</time><h1 class="text-3xl font-bold">Trust your dependencies, but Verify!</h1></div><div class="[&amp;&gt;*]:mb-3 [&amp;&gt;*:last-child]:mb-0"><h1>Trust your dependencies, but Verify!</h1>
<p>I recently was reminded how often we take our programming languages and libraries for granted, thinking that they are ‚Äústable‚Äù and forgetting that they are also evolving, getting better and performant all the time.</p>
<p>I was researching for another post on Kotlin value class (coming soon) and came across these lines of code in <a href="https://github.com/Kotlin/KEEP/blob/master/notes/value-classes.md#introduction">value classes KEEP notes</a></p>
<pre><code class="hljs language-kotlin"><span class="hljs-function"><span class="hljs-keyword">fun</span> <span class="hljs-title">main</span><span class="hljs-params">()</span></span> {
    <span class="hljs-keyword">val</span> a = <span class="hljs-string">"Kotlin"</span>
    <span class="hljs-keyword">val</span> b = a.filter { it != <span class="hljs-string">' '</span> } <span class="hljs-comment">// Still "Kotlin"</span>
    println(a == b) <span class="hljs-comment">// true -- same value</span>
    println(a === b) <span class="hljs-comment">// false -- different instance</span>
}
</code></pre>
<p>This code is fragile and the source of fragility is String.filter from Kotlin standard library. The fragility comes from the fact that filter implementation could be changed to return the same reference to a in the future as there are no guarantees by the function regarding referential equality.</p>
<p>This example might not be interesting or relevant to everyone but depicts that software fragility (specifically behaviour sensitivity) can arise not just from our own code but from our dependencies as well and we should be careful regardless the source.</p>
<p>We can mitigate these kinds of scenarios by:</p>
<ol>
<li><strong><em>Being intentional</em></strong>: Become more intentional when relying on dependencies in your code, be skeptical and always remind yourself that the performance characteristics and/or implementation might change</li>
<li><strong><em>Testing rigorously</em></strong>: Have proper test suite. Unit tests to isolate the root cause and Integration tests to have contingencies against any cascading effects of such changes. So, if you decide on updating your dependencies automagically (looking at you Dependabot), you can identify regressions caused by updates to libraries and catch them before they wreak havoc in production</li>
<li><strong><em>Keep yourself informed</em></strong>: Go through the changes (at least the highlights of changes) in a library when migrating to a new major release version. We want to use the new shiny thing but let‚Äôs not shoot ourself in the foot with it</li>
</ol></div></article><script src="/_next/static/chunks/webpack-d9a4a9652bc05b48.js" async=""></script><script>(self.__next_f=self.__next_f||[]).push([0]);self.__next_f.push([2,null])</script><script>self.__next_f.push([1,"1:HL[\"/_next/static/css/c0c73e25285197d0.css\",\"style\"]\n"])</script><script>self.__next_f.push([1,"2:I[2846,[],\"\"]\n5:I[4707,[],\"\"]\n7:I[6423,[],\"\"]\n9:I[1060,[],\"\"]\n4:Ta59,"])</script><script>self.__next_f.push([1,"\u003ch1\u003eTrust your dependencies, but Verify!\u003c/h1\u003e\n\u003cp\u003eI recently was reminded how often we take our programming languages and libraries for granted, thinking that they are ‚Äústable‚Äù and forgetting that they are also evolving, getting better and performant all the time.\u003c/p\u003e\n\u003cp\u003eI was researching for another post on Kotlin value class (coming soon) and came across these lines of code in \u003ca href=\"https://github.com/Kotlin/KEEP/blob/master/notes/value-classes.md#introduction\"\u003evalue classes KEEP notes\u003c/a\u003e\u003c/p\u003e\n\u003cpre\u003e\u003ccode class=\"hljs language-kotlin\"\u003e\u003cspan class=\"hljs-function\"\u003e\u003cspan class=\"hljs-keyword\"\u003efun\u003c/span\u003e \u003cspan class=\"hljs-title\"\u003emain\u003c/span\u003e\u003cspan class=\"hljs-params\"\u003e()\u003c/span\u003e\u003c/span\u003e {\n    \u003cspan class=\"hljs-keyword\"\u003eval\u003c/span\u003e a = \u003cspan class=\"hljs-string\"\u003e\"Kotlin\"\u003c/span\u003e\n    \u003cspan class=\"hljs-keyword\"\u003eval\u003c/span\u003e b = a.filter { it != \u003cspan class=\"hljs-string\"\u003e' '\u003c/span\u003e } \u003cspan class=\"hljs-comment\"\u003e// Still \"Kotlin\"\u003c/span\u003e\n    println(a == b) \u003cspan class=\"hljs-comment\"\u003e// true -- same value\u003c/span\u003e\n    println(a === b) \u003cspan class=\"hljs-comment\"\u003e// false -- different instance\u003c/span\u003e\n}\n\u003c/code\u003e\u003c/pre\u003e\n\u003cp\u003eThis code is fragile and the source of fragility is String.filter from Kotlin standard library. The fragility comes from the fact that filter implementation could be changed to return the same reference to a in the future as there are no guarantees by the function regarding referential equality.\u003c/p\u003e\n\u003cp\u003eThis example might not be interesting or relevant to everyone but depicts that software fragility (specifically behaviour sensitivity) can arise not just from our own code but from our dependencies as well and we should be careful regardless the source.\u003c/p\u003e\n\u003cp\u003eWe can mitigate these kinds of scenarios by:\u003c/p\u003e\n\u003col\u003e\n\u003cli\u003e\u003cstrong\u003e\u003cem\u003eBeing intentional\u003c/em\u003e\u003c/strong\u003e: Become more intentional when relying on dependencies in your code, be skeptical and always remind yourself that the performance characteristics and/or implementation might change\u003c/li\u003e\n\u003cli\u003e\u003cstrong\u003e\u003cem\u003eTesting rigorously\u003c/em\u003e\u003c/strong\u003e: Have proper test suite. Unit tests to isolate the root cause and Integration tests to have contingencies against any cascading effects of such changes. So, if you decide on updating your dependencies automagically (looking at you Dependabot), you can identify regressions caused by updates to libraries and catch them before they wreak havoc in production\u003c/li\u003e\n\u003cli\u003e\u003cstrong\u003e\u003cem\u003eKeep yourself informed\u003c/em\u003e\u003c/strong\u003e: Go through the changes (at least the highlights of changes) in a library when migrating to a new major release version. We want to use the new shiny thing but let‚Äôs not shoot ourself in the foot with it\u003c/li\u003e\n\u003c/ol\u003e"])</script><script>self.__next_f.push([1,"6:[\"slug\",\"post-001-trust-your-dependencies-but-verify\",\"d\"]\na:[]\n"])</script><script>self.__next_f.push([1,"0:[\"$\",\"$L2\",null,{\"buildId\":\"CDoaoOH2VGaEx3fUYkxkj\",\"assetPrefix\":\"\",\"urlParts\":[\"\",\"posts\",\"post-001-trust-your-dependencies-but-verify\"],\"initialTree\":[\"\",{\"children\":[\"posts\",{\"children\":[[\"slug\",\"post-001-trust-your-dependencies-but-verify\",\"d\"],{\"children\":[\"__PAGE__?{\\\"slug\\\":\\\"post-001-trust-your-dependencies-but-verify\\\"}\",{}]}]}]},\"$undefined\",\"$undefined\",true],\"initialSeedData\":[\"\",{\"children\":[\"posts\",{\"children\":[[\"slug\",\"post-001-trust-your-dependencies-but-verify\",\"d\"],{\"children\":[\"__PAGE__\",{},[[\"$L3\",[\"$\",\"article\",null,{\"className\":\"mx-auto max-w-xl py-8\",\"children\":[[\"$\",\"div\",null,{\"className\":\"mb-8 text-center\",\"children\":[[\"$\",\"time\",null,{\"dateTime\":\"2024-04-20T00:00:00.000Z\",\"className\":\"mb-1 text-xs text-gray-600\",\"children\":\"April 20, 2024\"}],[\"$\",\"h1\",null,{\"className\":\"text-3xl font-bold\",\"children\":\"Trust your dependencies, but Verify!\"}]]}],[\"$\",\"div\",null,{\"className\":\"[\u0026\u003e*]:mb-3 [\u0026\u003e*:last-child]:mb-0\",\"dangerouslySetInnerHTML\":{\"__html\":\"$4\"}}]]}],null],null],null]},[null,[\"$\",\"$L5\",null,{\"parallelRouterKey\":\"children\",\"segmentPath\":[\"children\",\"posts\",\"children\",\"$6\",\"children\"],\"error\":\"$undefined\",\"errorStyles\":\"$undefined\",\"errorScripts\":\"$undefined\",\"template\":[\"$\",\"$L7\",null,{}],\"templateStyles\":\"$undefined\",\"templateScripts\":\"$undefined\",\"notFound\":\"$undefined\",\"notFoundStyles\":\"$undefined\"}]],null]},[null,[\"$\",\"$L5\",null,{\"parallelRouterKey\":\"children\",\"segmentPath\":[\"children\",\"posts\",\"children\"],\"error\":\"$undefined\",\"errorStyles\":\"$undefined\",\"errorScripts\":\"$undefined\",\"template\":[\"$\",\"$L7\",null,{}],\"templateStyles\":\"$undefined\",\"templateScripts\":\"$undefined\",\"notFound\":\"$undefined\",\"notFoundStyles\":\"$undefined\"}]],null]},[[[[\"$\",\"link\",\"0\",{\"rel\":\"stylesheet\",\"href\":\"/_next/static/css/c0c73e25285197d0.css\",\"precedence\":\"next\",\"crossOrigin\":\"$undefined\"}]],[\"$\",\"html\",null,{\"lang\":\"en\",\"children\":[null,[\"$\",\"body\",null,{\"className\":\"roboto-regular antialiased\",\"children\":[\"$\",\"$L5\",null,{\"parallelRouterKey\":\"children\",\"segmentPath\":[\"children\"],\"error\":\"$undefined\",\"errorStyles\":\"$undefined\",\"errorScripts\":\"$undefined\",\"template\":[\"$\",\"$L7\",null,{}],\"templateStyles\":\"$undefined\",\"templateScripts\":\"$undefined\",\"notFound\":[[\"$\",\"title\",null,{\"children\":\"404: This page could not be found.\"}],[\"$\",\"div\",null,{\"style\":{\"fontFamily\":\"system-ui,\\\"Segoe UI\\\",Roboto,Helvetica,Arial,sans-serif,\\\"Apple Color Emoji\\\",\\\"Segoe UI Emoji\\\"\",\"height\":\"100vh\",\"textAlign\":\"center\",\"display\":\"flex\",\"flexDirection\":\"column\",\"alignItems\":\"center\",\"justifyContent\":\"center\"},\"children\":[\"$\",\"div\",null,{\"children\":[[\"$\",\"style\",null,{\"dangerouslySetInnerHTML\":{\"__html\":\"body{color:#000;background:#fff;margin:0}.next-error-h1{border-right:1px solid rgba(0,0,0,.3)}@media (prefers-color-scheme:dark){body{color:#fff;background:#000}.next-error-h1{border-right:1px solid rgba(255,255,255,.3)}}\"}}],[\"$\",\"h1\",null,{\"className\":\"next-error-h1\",\"style\":{\"display\":\"inline-block\",\"margin\":\"0 20px 0 0\",\"padding\":\"0 23px 0 0\",\"fontSize\":24,\"fontWeight\":500,\"verticalAlign\":\"top\",\"lineHeight\":\"49px\"},\"children\":\"404\"}],[\"$\",\"div\",null,{\"style\":{\"display\":\"inline-block\"},\"children\":[\"$\",\"h2\",null,{\"style\":{\"fontSize\":14,\"fontWeight\":400,\"lineHeight\":\"49px\",\"margin\":0},\"children\":\"This page could not be found.\"}]}]]}]}]],\"notFoundStyles\":[]}]}]]}]],null],null],\"couldBeIntercepted\":false,\"initialHead\":[null,\"$L8\"],\"globalErrorComponent\":\"$9\",\"missingSlots\":\"$Wa\"}]\n"])</script><script>self.__next_f.push([1,"8:[[\"$\",\"meta\",\"0\",{\"name\":\"viewport\",\"content\":\"width=device-width, initial-scale=1\"}],[\"$\",\"meta\",\"1\",{\"charSet\":\"utf-8\"}],[\"$\",\"title\",\"2\",{\"children\":\"Trust your dependencies, but Verify!\"}],[\"$\",\"meta\",\"3\",{\"name\":\"description\",\"content\":\"JVM lover‚òïÔ∏è‚ù§Ô∏è\\nSpace Enthusiast üöÄ\\nAmateur chef üë®üèΩ‚Äçüç≥\"}],[\"$\",\"link\",\"4\",{\"rel\":\"apple-touch-icon\",\"href\":\"/apple-touch-icon.png\",\"sizes\":\"180x180\"}],[\"$\",\"link\",\"5\",{\"rel\":\"icon\",\"href\":\"/favicon-16x16.png\",\"type\":\"image/png\",\"sizes\":\"16x16\"}],[\"$\",\"link\",\"6\",{\"rel\":\"icon\",\"href\":\"/favicon-32x32.png\",\"type\":\"image/png\",\"sizes\":\"32x32\"}]]\n3:null\n"])</script></body></html>